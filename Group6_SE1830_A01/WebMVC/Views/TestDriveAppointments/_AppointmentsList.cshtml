@model Dictionary<string, List<BLL.BusinessObjects.ViewTestDriveAppointment>>

<h4>📝 Cuộc hẹn sắp tới</h4>

@foreach (var group in Model)
{
    <h5>@group.Key</h5>
    @if (group.Value.Any())
    {
        <table class="table-appointments">
            <thead>
                <tr>
                    <th>Khách</th>
                    <th>Xe</th>
                    <th>Giờ</th>
                    <th>Trạng thái</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in group.Value)
                {
                    <tr>
                        <td>@item.CustomerName</td>
                        <td>@item.VersionName</td>
                        <td>@item.DateTime.ToString("HH:mm")</td>
                        <td>@item.Status</td>
                        <td>
                            @if (item.Status == "Waiting")
                            {
                                <a href="@Url.Action("Start", "TestDriveAppointments", new { id = item.AppointmentID })" class="btn-action btn-start">▶️</a>
                                <a href="@Url.Action("Delete", "TestDriveAppointments", new { id = item.AppointmentID })" class="btn-action btn-delete" onclick="return confirm('Bạn có chắc muốn xóa lịch hẹn này?');">🗑️</a>
                            }
                            else if (item.Status == "Driving")
                            {
                                <a href="@Url.Action("Complete", "TestDriveAppointments", new { id = item.AppointmentID })" class="btn-action btn-finish">⏹</a>
                            }
                            else if (item.Status == "Scheduled" || item.Status == "No Show")
                            {
                                <a href="@Url.Action("Delete", "TestDriveAppointments", new { id = item.AppointmentID })" class="btn-action btn-delete" onclick="return confirm('Bạn có chắc muốn xóa lịch hẹn này?');">🗑️</a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="no-appointment">Không có lịch hẹn</p>
    }
}
